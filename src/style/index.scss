@use './var.scss';
@use './html-reset.scss';
@use './atom.scss';

html {
  width: var(--win-w);
  height: var(--win-h);
}

body {
  background-color: var(--app-bg-color);
  color: var(--app-text-color);
  transition:
    background-color 0.2s ease,
    color 0.2s ease;
}

.page-size,
[page-size] {
  width: var(--gkd-w);
  height: var(--gkd-h);
}

html.dark-mode-active .device-top-icon {
  color: #cfeee0;
}
html.dark-mode-active .device-top-icon:hover {
  color: #a7e7c4;
}

html.dark-mode-active .bg-white {
  background-color: #1b1b22 !important;
}

html.dark-mode-active [class*='border-#efeff5'] {
  border-color: #373744 !important;
}

.snapshot-floating-panel {
  background-color: var(--panel-bg-color);
  color: var(--panel-text-color);
  border: 1px solid var(--panel-border-color) !important;
  box-shadow: 0 4px 16px var(--panel-shadow-color);
  border-radius: 12px;
  overflow: hidden;
  background-clip: padding-box;
  opacity: 0.95;
  transition: opacity 0.2s ease;
}
.snapshot-floating-panel:hover {
  opacity: 1;
}
html.dark-mode-active .snapshot-floating-panel,
html.dark-mode-active .snapshot-floating-panel--passthrough {
  background-color: var(--panel-bg-color) !important;
  color: var(--panel-text-color) !important;
  border-color: var(--panel-border-color) !important;
  box-shadow: 0 6px 18px var(--panel-shadow-color);
}
html.dark-mode-active .snapshot-floating-panel .n-input,
html.dark-mode-active .snapshot-floating-panel .n-input__input-el,
html.dark-mode-active .snapshot-floating-panel .n-input__textarea-el {
  background-color: #1b1f2a !important;
  color: #e8e8ee !important;
}
html.dark-mode-active .snapshot-floating-panel .n-input__border {
  border-color: rgba(226, 232, 240, 0.2) !important;
}
html.dark-mode-active .snapshot-floating-panel .n-button--tertiary-type {
  color: #d9dee7 !important;
}
html.dark-mode-active .snapshot-floating-panel .n-button--success-type {
  color: #13c67b !important;
}
html.dark-mode-active .snapshot-floating-panel .n-text {
  color: #d9dee7 !important;
}

.floating-panel {
  border-radius: 12px !important;
  border: 1px solid var(--panel-border-color);
  box-shadow: 0 4px 16px var(--panel-shadow-color);
  background-color: var(--panel-bg-color);
  overflow: hidden;
}
html.dark-mode-active .floating-panel {
  background-color: var(--panel-bg-color) !important;
  border-color: var(--panel-border-color) !important;
  box-shadow: 0 6px 18px var(--panel-shadow-color);
}
.floating-panel .n-button,
.floating-panel .n-input,
.floating-panel .n-textarea,
.floating-panel .n-select,
.floating-panel .n-checkbox,
.floating-panel .n-radio,
.floating-panel .n-switch,
.floating-panel .n-input__inner {
  border-radius: 6px !important;
}

.quickfind-icon {
  color: var(--quickfind-color);
}

.snapshot-token {
  background-color: var(--token-bg-color);
  color: var(--token-text-color);
}

.snapshot-row-viewed {
  background-color: var(--row-viewed-bg-color);
  border-color: var(--row-viewed-border-color);
}

.mini-hover-image {
  background-color: #fff;
}

.mini-hover-token {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0.72)
  );
  color: #0b1220;
  border: 1px solid rgba(15, 23, 42, 0.34);
  border-radius: 3px;
  backdrop-filter: blur(5px) saturate(1.25);
  -webkit-backdrop-filter: blur(5px) saturate(1.25);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.35) inset,
    0 1px 4px rgba(0, 0, 0, 0.28);
  text-shadow:
    0 1px 0 rgba(255, 255, 255, 0.85),
    0 0 1px rgba(0, 0, 0, 0.95);
}

.overlap-pos-token {
  padding: 0 2px;
  border-radius: 4px;
  background-color: #eef1f7;
  color: #1f2937;
}

.selector-ast-view {
  background-color: #d4d4d8;
  color: #111;
}

.selector-ast-view-error {
  background-color: #fecaca;
}

.selector-error-box {
  background-color: #fca5a5;
  color: #111;
}

.selector-error-arrow {
  color: #1f2937;
}

html.dark-mode-active .snapshot-floating-panel .n-dialog {
  background-color: #161821 !important;
}

html.dark-mode-active .n-dialog.snapshot-floating-panel {
  background-color: #161821 !important;
  color: #e8e8ee !important;
}

html.dark-mode-active .snapshot-floating-panel .n-dialog__title {
  color: #f4f6ff !important;
}

html.dark-mode-active .snapshot-floating-panel .n-checkbox .n-checkbox__label {
  color: #e8e8ee !important;
}

html.dark-mode-active .snapshot-token,
html.dark-mode-active [bg='#eee'] {
  background-color: var(--token-bg-color) !important;
  color: var(--token-text-color) !important;
}

html.dark-mode-active .snapshot-row-viewed {
  background-color: var(--row-viewed-bg-color) !important;
  border-color: var(--row-viewed-border-color) !important;
}

html.dark-mode-active .mini-hover-image {
  background-color: #1b1b22 !important;
}

html.dark-mode-active .mini-hover-token {
  background: linear-gradient(
    180deg,
    rgba(12, 16, 24, 0.94),
    rgba(18, 23, 32, 0.84)
  ) !important;
  color: #f8fbff !important;
  border-color: rgba(226, 232, 240, 0.42) !important;
  box-shadow:
    0 0 0 1px rgba(15, 23, 42, 0.5) inset,
    0 1px 5px rgba(0, 0, 0, 0.62) !important;
  text-shadow:
    0 1px 2px rgba(0, 0, 0, 1),
    0 0 1px rgba(0, 0, 0, 1) !important;
}

html.dark-mode-active .overlap-pos-token {
  background-color: #2d3340 !important;
  color: #e7eaf3 !important;
}

html.dark-mode-active .selector-ast-view {
  background-color: #2d3340 !important;
  color: #e7eaf3 !important;
}

html.dark-mode-active .selector-ast-view-error {
  background-color: #5a1f26 !important;
  color: #ffdede !important;
}

html.dark-mode-active .selector-error-box {
  background-color: #4a1e24 !important;
  color: #ffdede !important;
}

html.dark-mode-active .selector-error-arrow {
  color: #f4c2c2 !important;
}

.snapshot-page .n-button {
  --n-icon-size: var(--app-icon-size);
}

.snapshot-sidebar {
  width: calc(var(--app-icon-size) + 16px);
  --n-icon-size: var(--app-icon-size);
  --svg-h: var(--app-icon-size);
}
.snapshot-sidebar .SvgIcon {
  width: var(--app-icon-size) !important;
  height: var(--app-icon-size) !important;
}

.home-topbar-icons {
  --n-icon-size: var(--app-icon-size);
  --svg-h: var(--app-icon-size);
}
.home-topbar-icons .SvgIcon {
  width: var(--app-icon-size) !important;
  height: var(--app-icon-size) !important;
}

.snapshot-page .n-card,
.snapshot-page .n-modal,
.snapshot-page .n-dialog,
.snapshot-page .TrackCard,
.snapshot-page .snapshot-floating-panel,
.snapshot-window,
.snapshot-window .n-card,
.snapshot-window .n-modal,
.snapshot-window .n-dialog,
.snapshot-window .TrackCard,
.snapshot-window .snapshot-floating-panel {
  border-radius: 12px;
}

.snapshot-page .n-button,
.snapshot-page .n-input,
.snapshot-page .n-textarea,
.snapshot-page .n-select,
.snapshot-page .n-checkbox,
.snapshot-page .n-radio,
.snapshot-page .n-switch,
.snapshot-page .n-input__inner,
.snapshot-window .n-button,
.snapshot-window .n-input,
.snapshot-window .n-textarea,
.snapshot-window .n-select,
.snapshot-window .n-checkbox,
.snapshot-window .n-radio,
.snapshot-window .n-switch,
.snapshot-window .n-input__inner {
  border-radius: 6px !important;
}

.snapshot-page .gkd_code,
.snapshot-page code,
.snapshot-page a,
.snapshot-page .snapshot-token,
.snapshot-page .selector-ast-view,
.snapshot-page .selector-error-box,
.snapshot-page .selector-error-arrow,
.snapshot-page .TrackCard .gkd_code,
.snapshot-page .TrackCard code,
.snapshot-window .gkd_code,
.snapshot-window code,
.snapshot-window a,
.snapshot-window .snapshot-token,
.snapshot-window .selector-ast-view,
.snapshot-window .selector-error-box,
.snapshot-window .selector-error-arrow,
.snapshot-window .TrackCard .gkd_code,
.snapshot-window .TrackCard code {
  font-family: ui-monospace, SFMono-Regular, Consolas, 'Liberation Mono', monospace;
  letter-spacing: -0.02em;
}

.snapshot-page .n-tree {
  --n-line-width: 1px;
  --n-line-color: var(--tree-line-color);
}
html.dark-mode-active .snapshot-page .n-tree {
  --n-line-color: var(--tree-line-color);
}

.snapshot-window .n-card {
  border: 1px solid rgba(128, 128, 128, 0.15);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  opacity: 0.95;
  transition: opacity 0.2s ease;
}
.snapshot-window .n-card:hover {
  opacity: 1;
}

.window-anim {
  animation: window-pop 180ms ease-out;
}
@keyframes window-pop {
  from {
    opacity: 0;
    transform: translateY(6px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.settings-modal .settings-layout {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.settings-modal .n-dialog {
  border-radius: 12px;
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);
}
.settings-modal .settings-section {
  padding: 12px;
  border: 1px solid var(--settings-section-border-color);
  border-radius: 12px;
  background: var(--settings-section-bg-color);
}
.settings-modal .settings-title {
  font-weight: 600;
  margin-bottom: 8px;
}
.settings-modal .settings-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 8px 0;
}
.settings-modal .settings-debug {
  justify-content: space-between;
}
html.dark-mode-active .settings-modal .settings-section {
  background: var(--settings-section-bg-color);
  border-color: var(--settings-section-border-color);
}
